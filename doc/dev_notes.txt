// Proserve DB Changes for 3.18

* ALTER TABLE `jobs` CHANGE `updated` `updated` DATETIME NULL DEFAULT NULL ;



// Proserve DB Changes for 3.16alpha

## for all tasks make the actual duration = antic duration
## for all tasks make the actual start = antic start

## add enum in updates for tempassigning and make sure theres a reviewmet

ALTER TABLE `incidents` ADD `towner` TINYINT( 4 ) NOT NULL AFTER `owner` ;

ALTER TABLE `incidents` ADD INDEX ( `towner` ) ;

ALTER TABLE `jobs` ADD `po_number` VARCHAR( 255 ) AFTER `antic_days` ,
ADD `po_date` DATE NOT NULL AFTER `po_number` ,
ADD `actual_days` INT( 5 ) DEFAULT '0' NOT NULL AFTER `po_date` ,
ADD `value` FLOAT( 6, 2 ) NOT NULL AFTER `actual_days` ,
ADD `expenses` ENUM( 'included', 'excluded' ) NOT NULL AFTER `value` ,
ADD `expenses_amount` FLOAT( 6, 2 ) NOT NULL AFTER `expenses` ;

ALTER TABLE `jobs` ADD `salesperson` INT( 4 ) DEFAULT '0' NOT NULL AFTER `owner` ;
ALTER TABLE `jobs` ADD INDEX ( `salesperson` ) ;

ALTER TABLE `jobs` ADD `actual_start` INT( 11 ) AFTER `po_date` ;

ALTER TABLE `emailtype` DROP INDEX `id`
ALTER TABLE `emailtype` ADD `description` TEXT NOT NULL AFTER `name` ;
ALTER TABLE `emailtype` ADD `type` ENUM( 'user', 'system' ) DEFAULT 'user' NOT NULL AFTER `name` ;
UPDATE `emailtype` SET `type` = 'system' WHERE `id` = '9' LIMIT 1 ;
UPDATE `emailtype` SET `type` = 'system' WHERE `id` = '13' LIMIT 1 ;
UPDATE `emailtype` SET `type` = 'system' WHERE `id` = '12' LIMIT 1 ;

UPDATE `emailtype` SET `type` = 'system' WHERE `id` = '5' LIMIT 1 ;
UPDATE `emailtype` SET `type` = 'system' WHERE `id` = '40' LIMIT 1 ;


ALTER TABLE `usersoftware` ADD `backupid` TINYINT( 4 ) NOT NULL ;
ALTER TABLE `usersoftware` ADD INDEX ( `backupid` ) ;

ALTER TABLE `interfacestyles` DROP INDEX `id`   ;

UPDATE `emailtype` SET `type` = 'system' WHERE `id` = '44' LIMIT 1 ;
UPDATE `emailtype` SET `type` = 'system' WHERE `id` = '42' LIMIT 1 ;
UPDATE `emailtype` SET `type` = 'system' WHERE `id` = '43' LIMIT 1 ;

UPDATE `interfacestyles` SET `name` = 'Neoteric' WHERE `id` = '8' LIMIT 1 ;
UPDATE `emailtype` SET `type` = 'system' WHERE `id` = '41' LIMIT 1 ;

### define ProServ email templates
INSERT INTO `emailtype` VALUES (44, 'ProServ: Job Closed', 'system', 'Notify Admin Dept. when Job is closed', 'john.shazell@salfordsoftware.co.uk', '<supportemail>', '<supportemail>', '', '', 'ProServ Job <jobref> Closed', 'This is automatic notification that job <jobref> has been closed.\r\n\r\n<jobref> - <jobname>\r\n\r\nClosed by <userrealname>.\r\n<todaysdate>\r\n\r\nPlease see see https://proserv.salfordsoftware.co.uk/job.php?jid=<jobid> for more info.');
INSERT INTO `emailtype` VALUES (45, 'ProServ: Status Changed', 'system', 'Notify Project Manager and Primary Consultant when job changes status to action required.', '<projectmanageremail>', '<supportemail>', '<supportemail>', '<consultant1email>  ', '', 'ProServ Job <jobref> Action Required', 'This is automatic notification that job <jobref> has changed status to ''Action Required''\r\n\r\n<jobref> - <jobname>\r\n\r\nStatus changed by <userrealname>.\r\n<todaysdate>\r\n\r\nPlease see see https://proserv.salfordsoftware.co.uk/job.php?jid=<jobid> for more info.');



CREATE TABLE `tempassigns` (
  `incidentid` int(5) NOT NULL default '0',
  `originalowner` int(5) NOT NULL default '0',
  `userstatus` tinyint(4) NOT NULL default '1',
  PRIMARY KEY  (`incidentid`,`originalowner`)
)

ALTER TABLE `tempassigns` ADD `assigned` ENUM( 'yes', 'no' ) DEFAULT 'no' NOT NULL ;
ALTER TABLE `tempassigns` ADD INDEX ( `assigned` ) ;


===============
/*
7 May 02

Total Physical Source Lines of Code (SLOC)                = 54,843
Development Effort Estimate, Person-Years (Person-Months) = 13.40 (160.80)
 (Basic COCOMO model, Person-Months = 2.4 * (KSLOC**1.05))
Schedule Estimate, Years (Months)                         = 1.44 (17.23)
 (Basic COCOMO model, Months = 2.5 * (person-months**0.38))
Estimated Average Number of Developers (Effort/Schedule)  = 9.33
Total Estimated Cost to Develop                           = $ 1,810,168
 (average salary = $56,286/year, overhead = 2.40).
Please credit this data as "generated using 'SLOCCount' by David A. Wheeler.
*/
